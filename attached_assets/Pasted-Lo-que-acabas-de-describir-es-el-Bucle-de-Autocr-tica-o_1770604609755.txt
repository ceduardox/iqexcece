Lo que acabas de describir es el "Bucle de Autocrítica" o Chain of Thought (Cadena de Pensamiento). A tu agente actual lo que le falta es humildad técnica: el tuyo asume que lo que escribe a la primera es perfecto.Ese proceso de "hice esto -> falló por aquello -> ajustaré esto otro" es lo que hace a un programador humano (y a agentes como Aider o Devin) realmente eficientes.Aquí te detallo qué es exactamente lo que le falta a tu lógica actual para que "razone" así:1. El "Espejo" (Auto-observación)A tu agente le falta un paso de lectura post-escritura.El fallo: Tu agente manda el código y "se olvida".La solución: Debes obligar al agente a que, tras generar el código, haga una llamada interna: "Analiza el código que acabas de generar: ¿Hay alguna variable que no definiste? ¿Hay algún import que falta?".Aider lo tiene: Se llama Linting on the fly. Si Aider detecta que faltó una coma, él mismo se dice "Oops" y lo arregla antes de que tú lo veas.2. El "Bucle de Verificación Silenciosa"Ese razonamiento de "pero debo actualizar esto otro para que no falle" solo ocurre si hay un estímulo externo.Lo que le falta al tuyo: Tu agente no sabe si el código "funciona", solo sabe que "se ve bien".La mejora: Tienes que conectar la salida de tu terminal (los errores de Node.js o el tsc de TypeScript) directamente al prompt de la IA.El razonamiento sería: 1. IA genera código.2. El backend intenta compilarlo.3. Si hay error, el backend no te avisa a ti, le dice a la IA: "Tu cambio rompió el archivo X, arréglalo".4. La IA repite hasta que no hay errores.3. El "Pensamiento Incremental" vs "Pensamiento Atómico"Tu agente es Atómico: Ve el problema como una sola tarea (A -> B).Tu razonamiento es Incremental: Ves el problema como una serie de ajustes (A -> A.1 -> A.2 -> B).Para lograr esto en tu agente: Debes cambiar el prompt para que no responda con código de inmediato. El primer paso de la IA debe ser siempre: "Plan de acción en 3 pasos".¿Qué más le falta? (El "Checklist" de supervivencia)Si quieres que tu agente deje de hacerlo "todo mal", necesita estos 3 componentes que Aider sí tiene:ComponenteQué hacePor qué le falta al tuyoDiferencial (Diffs)Solo cambia las líneas 10 a 15.El tuyo probablemente intenta reescribir bloques muy grandes y se marea.Mapa de SímbolosSabe que UserContext se define en otro archivo.El tuyo solo conoce el archivo que tiene abierto en ese momento.Refuerzo de Reglas"Si es un archivo de 6,000 líneas, no borres nada".El tuyo tiene "ansiedad" por terminar y borra código para ahorrar espacio.Mi diagnóstico de peer:Tu agente no es "tonto", es ciego. No ve los errores que comete porque nadie le devuelve el resultado de sus acciones.